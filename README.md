# ud-bus-idling
This repository contains the scripts and data used to create this [ArcGIS Dashboard](https://udel.maps.arcgis.com/apps/dashboards/87407bafbe2b49cda07d32d7aeb422c9), which displays the potential idling times and locations for the University of Delaware's shuttle buses from Dec 3rd, 2024 to Dec 14th, 2024.

## Overview of Folders and Files
 - **[scripts](https://github.com/anthonyym/ud-bus-idling/tree/main/scripts)**: this folder contains the R scripts (run using v4.1.2 of R).
   - **[ud_bus_transloc_pull_data.R](https://github.com/anthonyym/ud-bus-idling/blob/main/scripts/ud_bus_transloc_pull_data.R)**: this script pulls the data from the UD Shuttle Bus Transloc API every 5 seconds, writing the data to a file in CSV format (with semi-colon delimiters), one file per day. These output files are located in the [ud_bus_transloc_output](https://github.com/anthonyym/ud-bus-idling/tree/main/ud_bus_transloc_output) folder.
   - **[calculate_idle_from_transloc_TimeStamp.R](https://github.com/anthonyym/ud-bus-idling/blob/main/scripts/calculate_idle_from_transloc_TimeStamp.R)**: this script takes an output file from the [ud_bus_transloc_pull_data.R](https://github.com/anthonyym/ud-bus-idling/blob/main/scripts/ud_bus_transloc_pull_data.R) file and calculates the potential idling periods. The output from this script is contained in the [ud_bus_idle_times](https://github.com/anthonyym/ud-bus-idling/tree/main/ud_bus_idle_times) folder. The following parameters are used in the script:
     - move_variance=1.891: this is the minimum point-to-point distance (meters) the bus has to move for it to be considered moving and not potentially idling. Reference: [GPS.gov](https://web.archive.org/web/20210421090704/https://www.gps.gov/systems/gps/performance/accuracy/).
     - min_idle_time=10: the minimum number of seconds the bus had to be stopped in order for it to be considered part of a potential idle period.
   - **[get_idle_time_stats.R](https://github.com/anthonyym/ud-bus-idling/blob/main/scripts/get_idle_time_stats.R)**: this creates the file [ud_bus_idle_time_stats_combined.csv](https://github.com/anthonyym/ud-bus-idling/blob/main/ud_bus_idle_time_stats_combined.csv), which summarizes the total bus run time and potential idling times for each bus and route per day, and also the totals across all the buses per day.
- **[ud_bus_idle_times](https://github.com/anthonyym/ud-bus-idling/tree/main/ud_bus_idle_times)**: this folder contains the CSV files generated by the [calculate_idle_from_transloc_TimeStamp.R](https://github.com/anthonyym/ud-bus-idling/blob/main/scripts/calculate_idle_from_transloc_TimeStamp.R) script. These CSV files are merged together to create the [ud_bus_idle_times_combined.csv](https://github.com/anthonyym/ud-bus-idling/blob/main/ud_bus_idle_times_combined.csv) file.
- **[ud_bus_transloc_output](https://github.com/anthonyym/ud-bus-idling/tree/main/ud_bus_transloc_output)**: this folder contains the CSV file outputs from the [ud_bus_transloc_pull_data.R](https://github.com/anthonyym/ud-bus-idling/blob/main/scripts/ud_bus_transloc_pull_data.R) script.
- **[ud_bus_idle_time_stats_combined.csv](https://github.com/anthonyym/ud-bus-idling/blob/main/ud_bus_idle_times_combined.csv)**: this file is the output from the [get_idle_time_stats.R](https://github.com/anthonyym/ud-bus-idling/blob/main/scripts/get_idle_time_stats.R) script.
- **[ud_bus_idle_times_combined.csv](https://github.com/anthonyym/ud-bus-idling/blob/main/ud_bus_idle_times_combined.csv)**: this file is the result of merging the per-day CSV files generated by the calculate_idle_from_transloc_TimeStamp.R, which are contained in the ud_bus_idle_times folder.
